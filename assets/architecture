// RapidRAR Architecture
digraph {
	rankdir=LR
	node [fontname=Helvetica fontsize=12 margin=0.2 shape=rect style=filled]
	edge [fontname=Helvetica fontsize=10]
	start [label="Start / CLI" fillcolor="#333333" fontcolor=white shape=circle style=filled width=0.8]
	subgraph cluster_0 {
		color="#F5F7FA" fontcolor="#555555" label="ðŸ Host Context (Python Control Plane)" style=filled
		init [label="GPU Manager
(RAII Context)" color="#333333" fillcolor="#FFFFFF"]
		batcher [label="Batch Generator
(Dynamic Batching)" color="#333333" fillcolor="#FFFFFF"]
		pool [label="ThreadPoolExecutor
(Task Dispatch)" color="#333333" fillcolor="#FFFFFF"]
		init -> batcher [color="#999999" style=dashed]
		batcher -> pool [label=Tasks]
	}
	subgraph cluster_1 {
		color="#E8F5E9" fontcolor="#2E7D32" label="âš¡ Device Context (CUDA Data Plane)" style=filled
		vram_in [label="Pinned Memory
(Input Buffer)" color="#2E7D32" fillcolor="#FFFFFF" shape=cylinder]
		kernel [label="CUDA Kernel
(Parallel Hash)" color="#2E7D32" fillcolor="#FFFFFF" shape=component]
		vram_out [label="Result Bitmap
(Output Buffer)" color="#2E7D32" fillcolor="#FFFFFF" shape=cylinder]
		vram_in -> kernel
		kernel -> vram_out
	}
	subgraph cluster_2 {
		label="" pencolor=transparent
		filter [label="Candidate?" fillcolor="#FFFFFF" shape=diamond style=filled]
		check [label="UnRAR Verify
(CPU Check)" fillcolor="#FFFFFF"]
		success [label="Success
Password Found" fillcolor="#2E7D32" fontcolor=white shape=doublecircle]
	}
	start -> init
	pool -> vram_in [label=" PCIe Bus (H2D)" color="#333333" penwidth=2.5]
	vram_out -> filter [label=" PCIe Bus (D2H)" color="#333333" penwidth=2.5]
	filter -> check [label=" Yes"]
	filter -> batcher [label=" No (Next Batch)" constraint=false style=dotted]
	check -> success [label=" Pass"]
	check -> batcher [label=" False Positive" color="#d32f2f" constraint=false fontcolor="#d32f2f" style=dotted]
}
